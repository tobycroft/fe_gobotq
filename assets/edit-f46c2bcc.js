import{N as w}from"./Net-a3152f35.js";import{p as H,g as W,a as g,ab as X,r as Y,c as _,aL as Z,e as $,f as ee,h as a,i as C,F as A,ad as te,ac as le,j as ae,_ as oe,aM as S,J as n,K as i,L as d,U as se,al as re,Q as D,R as F,P as ne,N as x}from"./index-27f30d5e.js";import{a as ue,V as ie}from"./VCol-de110227.js";import{V as de}from"./VRow-b7b571c6.js";import{V as ce}from"./VForm-6a4cf8da.js";import{c as me,u as pe,d as P,b as U}from"./VTextField-644bf734.js";import{m as ye,b as B,V as fe}from"./VSelect-eaa837fc.js";import{d as ve}from"./ssrBoot-8a68a0aa.js";const Ve=H({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...me(),...ye()},"VSwitch"),be=W()({name:"VSwitch",inheritAttrs:!1,props:Ve(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,s){let{attrs:k,slots:c}=s;const l=g(e,"indeterminate"),r=g(e,"modelValue"),{loaderClasses:t}=X(e),{isFocused:o,focus:N,blur:I}=pe(e),h=Y(),L=_(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),R=Z(),T=_(()=>e.id||`switch-${R}`);function j(){l.value&&(l.value=!1)}function M(p){var y,f;p.stopPropagation(),p.preventDefault(),(f=(y=h.value)==null?void 0:y.input)==null||f.click()}return $(()=>{const[p,y]=ee(k),f=P.filterProps(e),z=B.filterProps(e);return a(P,C({class:["v-switch",{"v-switch--inset":e.inset},{"v-switch--indeterminate":l.value},t.value,e.class]},p,f,{modelValue:r.value,"onUpdate:modelValue":v=>r.value=v,id:T.value,focused:o.value,style:e.style}),{...c,default:v=>{let{id:q,messagesId:E,isDisabled:J,isReadonly:K,isValid:O}=v;return a(B,C({ref:h},z,{modelValue:r.value,"onUpdate:modelValue":[m=>r.value=m,j],id:q.value,"aria-describedby":E.value,type:"checkbox","aria-checked":l.value?"mixed":void 0,disabled:J.value,readonly:K.value,onFocus:N,onBlur:I},y),{...c,default:m=>{let{backgroundColorClasses:V,backgroundColorStyles:u}=m;return a("div",{class:["v-switch__track",...V.value],style:u.value,onClick:M},null)},input:m=>{let{inputNode:V,icon:u,backgroundColorClasses:Q,backgroundColorStyles:G}=m;return a(A,null,[V,a("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":u||e.loading},e.inset?void 0:Q.value],style:e.inset?void 0:G.value},[a(ve,null,{default:()=>[e.loading?a(le,{name:"v-switch",active:!0,color:O.value===!1?void 0:L.value},{default:b=>c.loader?c.loader(b):a(ae,{active:b.isActive,color:b.color,indeterminate:!0,size:"16",width:"2"},null)}):u&&a(te,{key:u,icon:u,size:"x-small"},null)]})])])}})}})}),{}}}),ke={data(){return{valid:!0,show1:!1,formData:{img:"",password:"",allow_ip:"",cname:"",self_id:null,type:"public",owner:null,secret:"",active:!1,date:"",end_date:"",id:null},fields:[{key:"password",label:"密码",type:"password",rules:[]},{key:"secret",label:"密钥",type:"password",rules:[]},{key:"allow_ip",label:"允许的IP",type:"ip",rules:[]},{key:"type",label:"类型",type:"select",items:["public","private","share"],rules:[]},{key:"owner",label:"所有者",type:"text",rules:[]},{key:"active",label:"激活状态",type:"switch",rules:[]}]}},methods:{updateFormData(e,s){},async submitForm(){var e=await new w("/v1/bot/info/edit").PostFormData(this.formData);e.isSuccess?(S.SetAlert(e.echo),this.$router.go(-1)):S.SetAlert(e.echo)},back(){this.$router.go(-1)},async fillForm(){var e=await new w("/v1/bot/info/get").PostFormData({self_id:this.$route.query.self_id});e.isSuccess&&(this.formData=e.data,this.formData.active=!!e.data.active)}},mounted(){this.fillForm()},props:{jsonData:Object}};function he(e,s,k,c,l,r){return n(),i(ue,null,{default:d(()=>[a(ce,{modelValue:l.valid,"onUpdate:modelValue":s[1]||(s[1]=t=>l.valid=t),ref:"form",onSubmit:ne(r.submitForm,["prevent"])},{default:d(()=>[a(de,null,{default:d(()=>[(n(!0),se(A,null,re(l.fields,t=>(n(),i(ie,{key:t.key,cols:"12",md:"6"},{default:d(()=>[t.type==="text"||t.type==="ip"?(n(),i(U,{key:0,"hide-details":"false",label:t.label,type:t.type,modelValue:l.formData[t.key],"onUpdate:modelValue":o=>l.formData[t.key]=o,rules:t.rules},null,8,["label","type","modelValue","onUpdate:modelValue","rules"])):x("",!0),t.type==="password"?(n(),i(U,{key:1,"append-icon":l.show1?"mdi-eye":"mdi-eye-off","hide-details":"false",label:t.label,type:l.show1?"text":"password",modelValue:l.formData[t.key],"onUpdate:modelValue":o=>l.formData[t.key]=o,rules:t.rules,"onClick:append":s[0]||(s[0]=o=>l.show1=!l.show1)},null,8,["append-icon","label","type","modelValue","onUpdate:modelValue","rules"])):t.type==="select"?(n(),i(fe,{key:2,label:t.label,items:t.items,modelValue:l.formData[t.key],"onUpdate:modelValue":o=>l.formData[t.key]=o},null,8,["label","items","modelValue","onUpdate:modelValue"])):t.type==="switch"?(n(),i(be,{key:3,inset:"",label:t.label,modelValue:l.formData[t.key],"onUpdate:modelValue":o=>l.formData[t.key]=o},null,8,["label","modelValue","onUpdate:modelValue"])):x("",!0)]),_:2},1024))),128))]),_:1}),a(D,{type:"submit",disabled:!l.valid,block:"",color:"primary",class:"mt-4"},{default:d(()=>[F("提交")]),_:1},8,["disabled"]),a(D,{block:"",color:"grey",class:"mt-4",onClick:r.back},{default:d(()=>[F("返回")]),_:1},8,["onClick"])]),_:1},8,["modelValue","onSubmit"])]),_:1})}const Pe=oe(ke,[["render",he]]);export{Pe as default};
