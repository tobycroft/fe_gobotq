import{T as A,N as X}from"./Net-c4a5ddcb.js";import{p as O,m as $,o as Z,g as j,u as M,a as ee,b as te,c as m,r as S,d as ae,w as F,e as E,f as le,h as a,F as oe,i as B,V as se,j as ne,k as I,n as ue,l as re,q as ie,s as de,t as ce,v as me,x as fe,y as ve,z as he,A as ge,B as pe,C as ye,D as ke,E as Ve,G as be,H as we,I as Ce,_ as qe,J as D,K as Q,L as i,M as T,N as _e,O as N,P as R,Q as xe,R as b,S as y,T as K}from"./index-611e515b.js";import{_ as Se}from"./gobotq-1cdfb48b.js";import{V as Pe}from"./index-5402ece9.js";import{V as Ae}from"./VContainer-fbbf3ea9.js";import{V as Fe}from"./VForm-77671387.js";import{V as Be}from"./VTextField-69c9b00c.js";import{V as P}from"./VCol-1f522b73.js";import{m as Ie,a as De,u as Qe,V as Te}from"./VInput-8ffcd0ee.js";const Ne=O({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...$(),...Ie(),...Z(De({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Re=j()({name:"VOtpInput",props:Ne(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,d){let{attrs:k,emit:V,slots:c}=d;const{dimensionStyles:f}=M(e),{isFocused:v,focus:w,blur:C}=Qe(e),o=ee(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:q}=te(),g=m(()=>Number(e.length)),z=m(()=>Array(g.value).fill(0)),r=S(-1),_=S(),h=S([]),x=m(()=>h.value[r.value]);function G(){if(e.type==="number"&&/[^0-9]/g.test(x.value.value)){x.value.value="";return}const t=o.value.slice(),l=x.value.value;t[r.value]=l;let s=null;r.value>o.value.length?s=o.value.length+1:r.value+1!==g.value&&(s="next"),o.value=t,s&&I(_.value,s)}function U(t){const l=o.value.slice(),s=r.value;let n=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?n="prev":t.key==="ArrowRight"?n="next":["Backspace","Delete"].includes(t.key)&&(l[r.value]="",o.value=l,r.value>0&&t.key==="Backspace"?n="prev":requestAnimationFrame(()=>{var u;(u=h.value[s])==null||u.select()})),requestAnimationFrame(()=>{n!=null&&I(_.value,n)}))}function H(t,l){var s,n;l.preventDefault(),l.stopPropagation(),o.value=(((s=l==null?void 0:l.clipboardData)==null?void 0:s.getData("Text"))??"").split(""),(n=h.value)==null||n[t].blur()}function J(){o.value=[]}function Y(t,l){w(),r.value=l}function W(){C(),r.value=-1}return ae({VField:{color:m(()=>e.color),bgColor:m(()=>e.color),baseColor:m(()=>e.baseColor),disabled:m(()=>e.disabled),error:m(()=>e.error),variant:m(()=>e.variant)}},{scoped:!0}),F(o,t=>{t.length===g.value&&V("finish",t.join(""))},{deep:!0}),F(r,t=>{t<0||ue(()=>{var l;(l=h.value[t])==null||l.select()})}),E(()=>{var s;const[t,l]=le(k);return a("div",B({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[a("div",{ref:_,class:"v-otp-input__content",style:[f.value]},[z.value.map((n,u)=>a(oe,null,[e.divider&&u!==0&&a("span",{class:"v-otp-input__divider"},[e.divider]),a(Te,{focused:v.value&&e.focusAll||r.value===u,key:u},{...c,default:()=>a("input",{ref:p=>h.value[u]=p,"aria-label":q(e.label,u+1),autofocus:u===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:o.value[u],onInput:G,onFocus:p=>Y(p,u),onBlur:W,onKeydown:U,onPaste:p=>H(u,p)},null)})])),a("input",B({class:"v-otp-input-input",type:"hidden"},l,{value:o.value.join("")}),null),a(se,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var n;return[((n=c.loader)==null?void 0:n.call(c))??a(ne,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(s=c.default)==null?void 0:s.call(c)])])}),{blur:()=>{var t;(t=h.value)==null||t.some(l=>l.blur())},focus:()=>{var t;(t=h.value)==null||t[0].focus()},reset:J,isFocused:v}}});const Le=O({color:String,...re(),...ie(),...$(),...de(),...ce(),...me(),...fe(),...ve(),...he()},"VSheet"),L=j()({name:"VSheet",props:Le(),setup(e,d){let{slots:k}=d;const{themeClasses:V}=ge(e),{backgroundColorClasses:c,backgroundColorStyles:f}=pe(ye(e,"color")),{borderClasses:v}=ke(e),{dimensionStyles:w}=M(e),{elevationClasses:C}=Ve(e),{locationStyles:o}=be(e),{positionClasses:q}=we(e),{roundedClasses:g}=Ce(e);return E(()=>a(e.tag,{class:["v-sheet",V.value,c.value,v.value,C.value,q.value,g.value,e.class],style:[f.value,w.value,o.value,e.style]},k)),{}}}),Oe={beforeCreate(){A.Api_is_login()&&this.$router.push("/center")},created(){this.qq=localStorage.getItem("qq")},data:()=>({show1:!0,show2:!1,qq:"",password:"",rules:[e=>e?!0:"这里填写的应该是你的QQ号码，而不是你机器人的QQ号码"]}),methods:{gotonext(){this.qq.length>5&&(this.show1=!1,this.show2=!0,localStorage.setItem("qq",this.qq))},clearout(){this.show2=!1,this.show1=!0,this.qq="",localStorage.removeItem("qq")},async login(){var e=await new X("/v1/index/login/login").PostFormData({qq:this.qq,password:this.password});e.isSuccess&&(A.Api_set_uidAndToken(e.data.uid,e.data.token),this.$router.push("/center"))}}},$e=K("h3",{class:"text-h6 mb-4"},"填写你QQ的登录码",-1),je={class:"text-body-2"};function Me(e,d,k,V,c,f){return D(),Q(Ae,{class:"align-self-center"},{default:i(()=>[e.show1?(D(),Q(T,{key:0,class:"mx-auto","max-width":"200",height:"200",image:Se,title:"GobotQ",theme:"dark"})):_e("",!0),N(a(L,{width:"100%",class:"mx-auto mt-6"},{default:i(()=>[a(Fe,{onSubmit:d[1]||(d[1]=xe(()=>{},["prevent"]))},{default:i(()=>[a(Be,{autofocus:"",modelValue:e.qq,"onUpdate:modelValue":d[0]||(d[0]=v=>e.qq=v),rules:e.rules,label:"这里输入你的QQ号码"},null,8,["modelValue","rules"]),a(b,{type:"submit",block:"",class:"mt-0",color:"blue",onClick:f.gotonext},{default:i(()=>[y("下一步")]),_:1},8,["onClick"]),a(b,{type:"submit",block:"",class:"mt-4",color:"grey",onClick:f.clearout},{default:i(()=>[y("清空数据")]),_:1},8,["onClick"])]),_:1})]),_:1},512),[[R,e.show1]]),a(Pe,null,{default:i(()=>[N(a(T,{class:"py-8 px-6 text-center mx-auto ma-4",elevation:"12","max-width":"100%",width:"100%"},{default:i(()=>[$e,K("div",je,[a(P,null,{default:i(()=>[y("不是你的QQ密码！！！")]),_:1}),a(P,null,{default:i(()=>[y("登录码请通过已在线的Acfur机器人获取")]),_:1}),a(P,null,{default:i(()=>[y("向机器人发送“acfur登录”，并等待机器人回复验证码给你")]),_:1})]),a(L,{color:"surface"},{default:i(()=>[a(Re,{modelValue:e.password,"onUpdate:modelValue":d[2]||(d[2]=v=>e.password=v),type:"text",length:"8",variant:"solo-filled","max-width":"400"},null,8,["modelValue"])]),_:1}),a(b,{onClick:f.login,class:"my-4",color:"blue",height:"40",text:"验证并登录",variant:"flat",width:"70%"},null,8,["onClick"]),a(b,{onClick:f.clearout,class:"my-4",color:"grey",height:"40",text:"返回",variant:"flat",width:"70%"},null,8,["onClick"])]),_:1},512),[[R,e.show2]])]),_:1})]),_:1})}const Xe=qe(Oe,[["render",Me]]);export{Xe as default};
