import{T as I,N as ee}from"./Net-78244874.js";import{p as B,m as M,o as te,g as F,u as E,a as ae,b as le,c as h,r as S,d as oe,w as Q,n as se,e as L,f as ne,h as a,F as G,i as T,V as ue,j as re,k as D,l as ie,q as K,s as ce,t as de,v as me,x as fe,y as ve,z as he,A as pe,B as ye,C as ge,D as Ve,E as ke,G as be,H as we,I as _e,_ as Ce,J as A,K as N,L as n,M as R,N as qe,O,P as xe,Q as _,R as w,S as $,T as U,U as Se}from"./index-a7bd54ad.js";import{_ as Pe,V as Ae}from"./VToolbar-73111ed9.js";import{V as Be}from"./index-03cecdbf.js";import{V as Fe}from"./VForm-b63ad47d.js";import{V as Le}from"./VTextField-9066dd5e.js";import{V as P}from"./VCol-12af04b8.js";import{m as Ie,a as Qe,u as Te,V as De}from"./VInput-ff854556.js";import{V as Ne}from"./VContainer-57175cd2.js";import{m as Re,c as Oe}from"./layout-f23ec632.js";import{V as $e}from"./VMain-de397a4e.js";import"./ssrBoot-a871c559.js";const je=B({autofocus:Boolean,divider:String,focusAll:Boolean,label:{type:String,default:"$vuetify.input.otp"},length:{type:[Number,String],default:6},modelValue:{type:[Number,String],default:void 0},placeholder:String,type:{type:String,default:"number"},...M(),...Ie(),...te(Qe({variant:"outlined"}),["baseColor","bgColor","class","color","disabled","error","loading","rounded","style","theme","variant"])},"VOtpInput"),Me=F()({name:"VOtpInput",props:je(),emits:{finish:e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,o){let{attrs:v,emit:y,slots:u}=o;const{dimensionStyles:m}=E(e),{isFocused:f,focus:V,blur:g}=Te(e),s=ae(e,"modelValue","",t=>String(t).split(""),t=>t.join("")),{t:C}=le(),k=h(()=>Number(e.length)),z=h(()=>Array(k.value).fill(0)),d=S(-1),q=S(),p=S([]),x=h(()=>p.value[d.value]);function H(){if(e.type==="number"&&/[^0-9]/g.test(x.value.value)){x.value.value="";return}const t=s.value.slice(),l=x.value.value;t[d.value]=l;let r=null;d.value>s.value.length?r=s.value.length+1:d.value+1!==k.value&&(r="next"),s.value=t,r&&D(q.value,r)}function J(t){const l=s.value.slice(),r=d.value;let i=null;["ArrowLeft","ArrowRight","Backspace","Delete"].includes(t.key)&&(t.preventDefault(),t.key==="ArrowLeft"?i="prev":t.key==="ArrowRight"?i="next":["Backspace","Delete"].includes(t.key)&&(l[d.value]="",s.value=l,d.value>0&&t.key==="Backspace"?i="prev":requestAnimationFrame(()=>{var c;(c=p.value[r])==null||c.select()})),requestAnimationFrame(()=>{i!=null&&D(q.value,i)}))}function Y(t,l){var r,i;l.preventDefault(),l.stopPropagation(),s.value=(((r=l==null?void 0:l.clipboardData)==null?void 0:r.getData("Text"))??"").split(""),(i=p.value)==null||i[t].blur()}function W(){s.value=[]}function X(t,l){V(),d.value=l}function Z(){g(),d.value=-1}return oe({VField:{color:h(()=>e.color),bgColor:h(()=>e.color),baseColor:h(()=>e.baseColor),disabled:h(()=>e.disabled),error:h(()=>e.error),variant:h(()=>e.variant)}},{scoped:!0}),Q(s,t=>{t.length===k.value&&y("finish",t.join(""))},{deep:!0}),Q(d,t=>{t<0||se(()=>{var l;(l=p.value[t])==null||l.select()})}),L(()=>{var r;const[t,l]=ne(v);return a("div",T({class:["v-otp-input",{"v-otp-input--divided":!!e.divider},e.class],style:[e.style]},t),[a("div",{ref:q,class:"v-otp-input__content",style:[m.value]},[z.value.map((i,c)=>a(G,null,[e.divider&&c!==0&&a("span",{class:"v-otp-input__divider"},[e.divider]),a(De,{focused:f.value&&e.focusAll||d.value===c,key:c},{...u,default:()=>a("input",{ref:b=>p.value[c]=b,"aria-label":C(e.label,c+1),autofocus:c===0&&e.autofocus,autocomplete:"one-time-code",class:["v-otp-input__field"],inputmode:e.type==="number"?"numeric":"text",min:e.type==="number"?0:void 0,maxlength:"1",placeholder:e.placeholder,type:e.type==="number"?"text":e.type,value:s.value[c],onInput:H,onFocus:b=>X(b,c),onBlur:Z,onKeydown:J,onPaste:b=>Y(c,b)},null)})])),a("input",T({class:"v-otp-input-input",type:"hidden"},l,{value:s.value.join("")}),null),a(ue,{contained:!0,"content-class":"v-otp-input__loader","model-value":!!e.loading,persistent:!0},{default:()=>{var i;return[((i=u.loader)==null?void 0:i.call(u))??a(re,{color:typeof e.loading=="boolean"?void 0:e.loading,indeterminate:!0,size:"24",width:"2"},null)]}}),(r=u.default)==null?void 0:r.call(u)])])}),{blur:()=>{var t;(t=p.value)==null||t.some(l=>l.blur())},focus:()=>{var t;(t=p.value)==null||t[0].focus()},reset:W,isFocused:f}}});const Ee=B({color:String,...ie(),...K(),...M(),...ce(),...de(),...me(),...fe(),...ve(),...he()},"VSheet"),j=F()({name:"VSheet",props:Ee(),setup(e,o){let{slots:v}=o;const{themeClasses:y}=pe(e),{backgroundColorClasses:u,backgroundColorStyles:m}=ye(ge(e,"color")),{borderClasses:f}=Ve(e),{dimensionStyles:V}=E(e),{elevationClasses:g}=ke(e),{locationStyles:s}=be(e),{positionClasses:C}=we(e),{roundedClasses:k}=_e(e);return L(()=>a(e.tag,{class:["v-sheet",y.value,u.value,f.value,g.value,C.value,k.value,e.class],style:[m.value,V.value,s.value,e.style]},v)),{}}}),Ge={created(){this.qq=localStorage.getItem("qq"),I.Api_is_login()&&this.$router.push("/center")},data:()=>({show1:!0,show2:!1,qq:"",password:"",rules:[e=>e?!0:"这里填写的应该是你的QQ号码，而不是你机器人的QQ号码"]}),methods:{gotonext(){this.qq.length>5&&(this.show1=!1,this.show2=!0,localStorage.setItem("qq",this.qq))},clearout(){this.show2=!1,this.show1=!0,this.qq="",localStorage.removeItem("qq")},async login(){var e=await new ee("/v1/index/login/login").PostFormData({qq:this.qq,password:this.password});e.isSuccess&&(I.Api_set_uidAndToken(e.data.uid,e.data.token),this.$router.push("/center"))}}},Ke=U("h3",{class:"text-h6 mb-4"},"填写你QQ的登录码",-1),Ue={class:"text-body-2"};function ze(e,o,v,y,u,m){return A(),N(Ne,{class:"align-self-center"},{default:n(()=>[e.show1?(A(),N(R,{key:0,class:"mx-auto","max-width":"200",height:"200",image:Pe,title:"GobotQ",theme:"dark"})):qe("",!0),O(a(j,{width:"100%",class:"mx-auto mt-6"},{default:n(()=>[a(Fe,{onSubmit:o[1]||(o[1]=xe(()=>{},["prevent"]))},{default:n(()=>[a(Le,{autofocus:"",modelValue:e.qq,"onUpdate:modelValue":o[0]||(o[0]=f=>e.qq=f),rules:e.rules,label:"这里输入你的QQ号码"},null,8,["modelValue","rules"]),a(_,{type:"submit",block:"",class:"mt-0",color:"blue",onClick:m.gotonext},{default:n(()=>[w("下一步")]),_:1},8,["onClick"]),a(_,{type:"submit",block:"",class:"mt-4",color:"grey",onClick:m.clearout},{default:n(()=>[w("清空数据")]),_:1},8,["onClick"])]),_:1})]),_:1},512),[[$,e.show1]]),a(Be,null,{default:n(()=>[O(a(R,{class:"py-8 px-6 text-center mx-auto ma-4",elevation:"12","max-width":"100%",width:"100%"},{default:n(()=>[Ke,U("div",Ue,[a(P,null,{default:n(()=>[w("不是你的QQ密码！！！")]),_:1}),a(P,null,{default:n(()=>[w("登录码请通过已在线的Acfur机器人获取")]),_:1}),a(P,null,{default:n(()=>[w("向机器人发送“acfur登录”，并等待机器人回复验证码给你")]),_:1})]),a(j,{color:"surface"},{default:n(()=>[a(Me,{modelValue:e.password,"onUpdate:modelValue":o[2]||(o[2]=f=>e.password=f),type:"text",length:"8",variant:"solo-filled","max-width":"400"},null,8,["modelValue"])]),_:1}),a(_,{onClick:m.login,class:"my-4",color:"blue",height:"40",text:"验证并登录",variant:"flat",width:"70%"},null,8,["onClick"]),a(_,{onClick:m.clearout,class:"my-4",color:"grey",height:"40",text:"返回",variant:"flat",width:"70%"},null,8,["onClick"])]),_:1},512),[[$,e.show2]])]),_:1})]),_:1})}const He=Ce(Ge,[["render",ze]]);const Je=B({...K(),...Re()},"VLayout"),Ye=F()({name:"VLayout",props:Je(),setup(e,o){let{slots:v}=o;const{layoutClasses:y,layoutStyles:u,getLayoutItem:m,items:f,layoutRef:V}=Oe(e);return L(()=>{var g;return a("div",{ref:V,class:[y.value,e.class],style:[u.value,e.style]},[(g=v.default)==null?void 0:g.call(v)])}),{getLayoutItem:m,items:f}}}),it={__name:"Login",setup(e){return(o,v)=>(A(),Se(G,null,[a(Ae,{title:"GoBotQ控制面板"}),a(Ye,{class:"rounded rounded-md"},{default:n(()=>[a($e,{class:"d-flex align-center justify-center"},{default:n(()=>[a(He)]),_:1})]),_:1})],64))}};export{it as default};
